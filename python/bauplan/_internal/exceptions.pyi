from bauplan._internal.schema import Ref
from bauplan._internal.state import TableCreatePlanApplyState, TableCreationPlanState
from typing import Final, final

class ApiErrorKind:
    """
    A typed API error kind, deserialized from the `type` and `context` fields
    of an error response.
    """
    @final
    class BranchExists(ApiErrorKind):
        __match_args__: Final = ("branch_name", "catalog_ref")
        def __new__(cls, /, branch_name: str, catalog_ref: Ref) -> ApiErrorKind.BranchExists: ...
        @property
        def branch_name(self, /) -> str: ...
        @property
        def catalog_ref(self, /) -> Ref: ...
    @final
    class BranchHeadChanged(ApiErrorKind):
        __match_args__: Final = ("input_ref", "head_ref")
        def __new__(cls, /, input_ref: Ref, head_ref: Ref) -> ApiErrorKind.BranchHeadChanged: ...
        @property
        def head_ref(self, /) -> Ref: ...
        @property
        def input_ref(self, /) -> Ref: ...
    @final
    class BranchNotFound(ApiErrorKind):
        __match_args__: Final = ("branch_name",)
        def __new__(cls, /, branch_name: str) -> ApiErrorKind.BranchNotFound: ...
        @property
        def branch_name(self, /) -> str: ...
    @final
    class CreateBranchForbidden(ApiErrorKind):
        __match_args__: Final = ("branch_name",)
        def __new__(cls, /, branch_name: str) -> ApiErrorKind.CreateBranchForbidden: ...
        @property
        def branch_name(self, /) -> str: ...
    @final
    class CreateNamespaceForbidden(ApiErrorKind):
        __match_args__: Final = ("namespace_name",)
        def __new__(cls, /, namespace_name: str) -> ApiErrorKind.CreateNamespaceForbidden: ...
        @property
        def namespace_name(self, /) -> str: ...
    @final
    class CreateTagForbidden(ApiErrorKind):
        __match_args__: Final = ("tag_name",)
        def __new__(cls, /, tag_name: str) -> ApiErrorKind.CreateTagForbidden: ...
        @property
        def tag_name(self, /) -> str: ...
    @final
    class DeleteBranchForbidden(ApiErrorKind):
        __match_args__: Final = ("branch_name",)
        def __new__(cls, /, branch_name: str) -> ApiErrorKind.DeleteBranchForbidden: ...
        @property
        def branch_name(self, /) -> str: ...
    @final
    class DeleteNamespaceForbidden(ApiErrorKind):
        __match_args__: Final = ("namespace_name",)
        def __new__(cls, /, namespace_name: str) -> ApiErrorKind.DeleteNamespaceForbidden: ...
        @property
        def namespace_name(self, /) -> str: ...
    @final
    class DeleteTableForbidden(ApiErrorKind):
        __match_args__: Final = ("table_name",)
        def __new__(cls, /, table_name: str) -> ApiErrorKind.DeleteTableForbidden: ...
        @property
        def table_name(self, /) -> str: ...
    @final
    class DeleteTagForbidden(ApiErrorKind):
        __match_args__: Final = ("tag_name",)
        def __new__(cls, /, tag_name: str) -> ApiErrorKind.DeleteTagForbidden: ...
        @property
        def tag_name(self, /) -> str: ...
    @final
    class InvalidRef(ApiErrorKind):
        __match_args__: Final = ("input_ref",)
        def __new__(cls, /, input_ref: str) -> ApiErrorKind.InvalidRef: ...
        @property
        def input_ref(self, /) -> str: ...
    @final
    class MergeConflict(ApiErrorKind):
        __match_args__: Final = ("source_ref", "destination_ref")
        def __new__(cls, /, source_ref: Ref, destination_ref: Ref) -> ApiErrorKind.MergeConflict: ...
        @property
        def destination_ref(self, /) -> Ref: ...
        @property
        def source_ref(self, /) -> Ref: ...
    @final
    class MergeForbidden(ApiErrorKind):
        __match_args__: Final = ("source_ref", "destination_branch")
        def __new__(cls, /, source_ref: str, destination_branch: str) -> ApiErrorKind.MergeForbidden: ...
        @property
        def destination_branch(self, /) -> str: ...
        @property
        def source_ref(self, /) -> str: ...
    @final
    class NamespaceExists(ApiErrorKind):
        __match_args__: Final = ("namespace_name", "catalog_ref")
        def __new__(cls, /, namespace_name: str, catalog_ref: Ref) -> ApiErrorKind.NamespaceExists: ...
        @property
        def catalog_ref(self, /) -> Ref: ...
        @property
        def namespace_name(self, /) -> str: ...
    @final
    class NamespaceIsNotEmpty(ApiErrorKind):
        __match_args__: Final = ("namespace_name", "branch_name")
        def __new__(cls, /, namespace_name: str, branch_name: str) -> ApiErrorKind.NamespaceIsNotEmpty: ...
        @property
        def branch_name(self, /) -> str: ...
        @property
        def namespace_name(self, /) -> str: ...
    @final
    class NamespaceNotFound(ApiErrorKind):
        __match_args__: Final = ("namespace_name", "input_ref", "catalog_ref")
        def __new__(cls, /, namespace_name: str, input_ref: str, catalog_ref: Ref) -> ApiErrorKind.NamespaceNotFound: ...
        @property
        def catalog_ref(self, /) -> Ref: ...
        @property
        def input_ref(self, /) -> str: ...
        @property
        def namespace_name(self, /) -> str: ...
    @final
    class NamespaceUnresolved(ApiErrorKind):
        __match_args__: Final = ("table_name", "namespace_name")
        def __new__(cls, /, table_name: str, namespace_name: str) -> ApiErrorKind.NamespaceUnresolved: ...
        @property
        def namespace_name(self, /) -> str: ...
        @property
        def table_name(self, /) -> str: ...
    @final
    class NotABranchRef(ApiErrorKind):
        __match_args__: Final = ("input_ref",)
        def __new__(cls, /, input_ref: str) -> ApiErrorKind.NotABranchRef: ...
        @property
        def input_ref(self, /) -> str: ...
    @final
    class NotATagRef(ApiErrorKind):
        __match_args__: Final = ("input_ref",)
        def __new__(cls, /, input_ref: str) -> ApiErrorKind.NotATagRef: ...
        @property
        def input_ref(self, /) -> str: ...
    @final
    class NotAWriteBranchRef(ApiErrorKind):
        __match_args__: Final = ("input_ref",)
        def __new__(cls, /, input_ref: str) -> ApiErrorKind.NotAWriteBranchRef: ...
        @property
        def input_ref(self, /) -> str: ...
    @final
    class RefNotFound(ApiErrorKind):
        __match_args__: Final = ("input_ref",)
        def __new__(cls, /, input_ref: str) -> ApiErrorKind.RefNotFound: ...
        @property
        def input_ref(self, /) -> str: ...
    @final
    class RenameBranchForbidden(ApiErrorKind):
        __match_args__: Final = ("old_branch_name", "new_branch_name")
        def __new__(cls, /, old_branch_name: str, new_branch_name: str) -> ApiErrorKind.RenameBranchForbidden: ...
        @property
        def new_branch_name(self, /) -> str: ...
        @property
        def old_branch_name(self, /) -> str: ...
    @final
    class RenameTagForbidden(ApiErrorKind):
        __match_args__: Final = ("old_tag_name", "new_tag_name")
        def __new__(cls, /, old_tag_name: str, new_tag_name: str) -> ApiErrorKind.RenameTagForbidden: ...
        @property
        def new_tag_name(self, /) -> str: ...
        @property
        def old_tag_name(self, /) -> str: ...
    @final
    class RevertDestinationTableExists(ApiErrorKind):
        __match_args__: Final = ("source_table_name", "destination_table_name")
        def __new__(cls, /, source_table_name: str, destination_table_name: str) -> ApiErrorKind.RevertDestinationTableExists: ...
        @property
        def destination_table_name(self, /) -> str: ...
        @property
        def source_table_name(self, /) -> str: ...
    @final
    class RevertIdenticalTable(ApiErrorKind):
        __match_args__: Final = ("source_table_name", "destination_table_name")
        def __new__(cls, /, source_table_name: str, destination_table_name: str) -> ApiErrorKind.RevertIdenticalTable: ...
        @property
        def destination_table_name(self, /) -> str: ...
        @property
        def source_table_name(self, /) -> str: ...
    @final
    class RevertTableForbidden(ApiErrorKind):
        __match_args__: Final = ("table_name", "source_ref", "destination_branch")
        def __new__(cls, /, table_name: str, source_ref: str, destination_branch: str) -> ApiErrorKind.RevertTableForbidden: ...
        @property
        def destination_branch(self, /) -> str: ...
        @property
        def source_ref(self, /) -> str: ...
        @property
        def table_name(self, /) -> str: ...
    @final
    class SameRef(ApiErrorKind):
        __match_args__: Final = ("input_ref", "catalog_ref")
        def __new__(cls, /, input_ref: Ref, catalog_ref: Ref) -> ApiErrorKind.SameRef: ...
        @property
        def catalog_ref(self, /) -> Ref: ...
        @property
        def input_ref(self, /) -> Ref: ...
    @final
    class TableNotFound(ApiErrorKind):
        __match_args__: Final = ("table_name", "input_ref", "catalog_ref")
        def __new__(cls, /, table_name: str, input_ref: str, catalog_ref: Ref) -> ApiErrorKind.TableNotFound: ...
        @property
        def catalog_ref(self, /) -> Ref: ...
        @property
        def input_ref(self, /) -> str: ...
        @property
        def table_name(self, /) -> str: ...
    @final
    class TagExists(ApiErrorKind):
        __match_args__: Final = ("tag_name", "catalog_ref")
        def __new__(cls, /, tag_name: str, catalog_ref: Ref) -> ApiErrorKind.TagExists: ...
        @property
        def catalog_ref(self, /) -> Ref: ...
        @property
        def tag_name(self, /) -> str: ...
    @final
    class TagNotFound(ApiErrorKind):
        __match_args__: Final = ("tag_name",)
        def __new__(cls, /, tag_name: str) -> ApiErrorKind.TagNotFound: ...
        @property
        def tag_name(self, /) -> str: ...

class BauplanError(Exception):
    def __new__(cls, /, *_args) -> BauplanError: ...

class BauplanHTTPError(BauplanError):
    """
    An HTTP error from the API.
    """
    def __new__(cls, /, code: int, type: str, message: str, kind: ApiErrorKind |None = None) -> BauplanHTTPError: ...
    @property
    def code(self, /) -> int: ...
    @property
    def kind(self, /) -> ApiErrorKind |None: ...
    @property
    def message(self, /) -> str: ...
    @property
    def type(self, /) -> str: ...

@final
class TableCreatePlanApplyStatusError(BauplanError):
    def __new__(cls, /, message: str, state: TableCreatePlanApplyState) -> TableCreatePlanApplyStatusError: ...
    @property
    def message(self, /) -> str: ...
    @property
    def state(self, /) -> TableCreatePlanApplyState: ...

class TableCreatePlanError(BauplanError):
    def __new__(cls, /) -> TableCreatePlanError: ...

@final
class TableCreatePlanStatusError(TableCreatePlanError):
    def __new__(cls, /, message: str, state: TableCreationPlanState) -> TableCreatePlanStatusError: ...
    @property
    def message(self, /) -> str: ...
    @property
    def state(self, /) -> TableCreationPlanState: ...

# 400 Bad Request
class BadRequestError(BauplanHTTPError): ...
class InvalidDataError(BadRequestError): ...
class InvalidRefError(BadRequestError): ...
class NotABranchRefError(InvalidRefError): ...
class NotATagRefError(InvalidRefError): ...
class NotAWriteBranchRefError(NotABranchRefError): ...
class SameRefError(InvalidRefError): ...

# 401 Unauthorized
class UnauthorizedError(BauplanHTTPError): ...

# 403 Forbidden
class ForbiddenError(BauplanHTTPError): ...
class CreateBranchForbiddenError(ForbiddenError): ...
class CreateNamespaceForbiddenError(ForbiddenError): ...
class CreateTagForbiddenError(ForbiddenError): ...
class DeleteBranchForbiddenError(ForbiddenError): ...
class DeleteNamespaceForbiddenError(ForbiddenError): ...
class DeleteTableForbiddenError(ForbiddenError): ...
class DeleteTagForbiddenError(ForbiddenError): ...
class MergeForbiddenError(ForbiddenError): ...
class RenameBranchForbiddenError(ForbiddenError): ...
class RenameTagForbiddenError(ForbiddenError): ...
class RevertTableForbiddenError(ForbiddenError): ...

# 404 Not Found
class NotFoundError(BauplanHTTPError): ...
class ResourceNotFoundError(NotFoundError): ...
class TableNotFoundError(ResourceNotFoundError): ...
class NamespaceNotFoundError(ResourceNotFoundError): ...
class BranchNotFoundError(ResourceNotFoundError): ...
class RefNotFoundError(ResourceNotFoundError): ...
class TagNotFoundError(ResourceNotFoundError): ...
class ApiMethodError(ResourceNotFoundError): ...

# 405 Method Not Allowed
class MethodNotAllowedError(BauplanHTTPError): ...
class ApiRouteError(MethodNotAllowedError): ...

# 409 Conflict
class ConflictError(BauplanHTTPError): ...
class UpdateConflictError(ConflictError): ...
class BranchExistsError(UpdateConflictError): ...
class TagExistsError(UpdateConflictError): ...
class NamespaceExistsError(UpdateConflictError): ...
class NamespaceUnresolvedError(ConflictError): ...
class BranchHeadChangedError(UpdateConflictError): ...
class MergeConflictError(UpdateConflictError): ...
class NamespaceIsNotEmptyError(UpdateConflictError): ...
class RevertDestinationTableExistsError(UpdateConflictError): ...
class RevertIdenticalTableError(UpdateConflictError): ...

# 429 Too Many Requests
class TooManyRequestsError(BauplanHTTPError): ...

# 5xx Server Errors
class InternalError(BauplanHTTPError): ...
class BadGatewayError(BauplanHTTPError): ...
class ServiceUnavailableError(BauplanHTTPError): ...
class GatewayTimeoutError(BauplanHTTPError): ...

# Non-HTTP errors
class BauplanJobError(BauplanError): ...
class BauplanQueryError(BauplanJobError): ...
class NoResultsFoundError(BauplanError): ...
class InvalidPlanError(BauplanError): ...
